<section class="page">
  <header class="toolbar">
    <form class="filters" (ngSubmit)="applyFilters()">
      <input
        type="search"
        placeholder="Buscar por nombre de episodio..."
        [(ngModel)]="qName" name="qName" />
      <button class="btn" type="submit">Aplicar</button>
    </form>
  </header>

  @if (errorMsg) {
    <p class="error">{{ errorMsg }}</p>
  }

  <div class="grid">
    @for (e of episodes; track e.id) {
      <article class="card" tabindex="0">
        <div class="meta">
          <h2>{{ e.name }}</h2>
          <p><strong>Fecha de emisi칩n:</strong> {{ e.air_date }}</p>
          <p><strong>C칩digo:</strong> {{ e.episode }}</p>
          <div class="characters">
            <p><strong>Personajes ({{ e.characters.length }}):</strong></p>
            <div class="characters-grid">
              @for (character of e.charactersData; track character.id) {
                <div class="character-card">
                  <img [src]="character.image" [alt]="character.name" loading="lazy" />
                  <p>{{ character.name }}</p>
                  <span class="status" [attr.data-status]="character.status">{{ character.status }}</span>
                </div>
              }
            </div>
          </div>
        </div>
      </article>
    }
  </div>

  <div class="actions">
    <button class="btn ghost" (click)="loadMore()" [disabled]="loading || page>=pages">
      {{ page < pages ? 'Cargar m치s' : 'No hay m치s resultados' }}
    </button>
  </div>
</section>
